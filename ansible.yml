---
    - hosts: localhost
      connection: local 
      become_user: jenkins
      tasks:
      - name: stop if we have old docker container
        command: docker-compose stop
        ignore_errors: yes

      - name: sleep for 5 seconds and continue with play
        wait_for: timeout=5

      - name: remove stopped docker container
        command: docker-compose rm -f
        ignore_errors: yes
    
      - name: start docker compose 
        command: docker-compose -f ./docker-compose.yml up -d
        ignore_errors: yes

      - name: make dir for index.html
        file:
          path: ./html
          state: directory 
          owner: jenkins
          group: jenkins
      
      - name: make dir for index.html
        command: cp -rf index.php html/index.php