---
    - hosts: all
      connection: local 
      become: true
      tasks:
      - name: stop if we have old docker container
        command: docker stop docker_compose_web-server_1
        ignore_errors: yes

      - name: sleep for 10 seconds and continue with play
        wait_for: timeout=10

      - name: remove stopped docker container
        command: docker rm docker_compose_web-server_1
        ignore_errors: yes

      - name: sleep for 10 seconds and continue with play
        wait_for: timeout=10  
    
      - name: start docker compose 
        command: docker-compose -f /var/lib/jenkins/workspace/docker_compose/docker-compose.yml up -d
        ignore_errors: yes

      - name: sleep for 10 seconds and continue with play
        wait_for: timeout=10
        
      - name: copy index.html
        command: cp -rf index.php ./html/index.php